# Vikingship 项目安装和运行指南

## 🔧 第一步：修复 npm 缓存权限（如果遇到权限错误）

如果遇到 `EACCES` 权限错误，请先运行：

```bash
sudo chown -R $(whoami) ~/.npm
```

或者清理 npm 缓存：

```bash
npm cache clean --force
```

## 📦 第二步：安装依赖

在项目根目录（`vikingship` 文件夹）下运行：

```bash
npm install --legacy-peer-deps
```

**说明**：
- `--legacy-peer-deps` 标志用于解决某些依赖包的 peer dependencies 冲突
- 安装过程可能需要几分钟，请耐心等待

## 🚀 第三步：运行项目

### 方式一：运行 Storybook（推荐）⭐

这是查看所有组件效果的最佳方式：

```bash
npm run storybook
```

运行后：
- 会自动打开浏览器（如果没有自动打开，手动访问 `http://localhost:6006`）
- 可以看到所有组件的可视化展示
- 可以交互式地测试组件

**停止 Storybook**：在终端按 `Ctrl + C`

### 方式二：运行 React 开发服务器

```bash
npm start
```

这会启动 React 开发服务器（需要先创建 App.tsx 入口文件）。

## 🧪 其他常用命令

### 运行测试
```bash
npm test
```

### 构建组件库
```bash
npm run build
```

### 代码检查
```bash
npm run lint
```

## ❌ 常见问题

### 1. 安装依赖时出错

**问题**：`ERESOLVE could not resolve` 或依赖冲突

**解决**：
- 确保使用了 `--legacy-peer-deps` 标志
- 如果还是失败，尝试删除 `node_modules` 和 `package-lock.json` 后重新安装：
  ```bash
  rm -rf node_modules package-lock.json
  npm install --legacy-peer-deps
  ```

### 2. Storybook 启动失败

**问题**：端口 6006 已被占用

**解决**：
- 修改 `package.json` 中的端口号，或
- 关闭占用端口的程序

### 3. 权限问题

**问题**：`EACCES` 权限错误

**解决**：
```bash
sudo chown -R $(whoami) ~/.npm
npm cache clean --force
```

## 📝 快速开始流程

```bash
# 1. 进入项目目录
cd vikingship

# 2. 安装依赖（如果遇到权限问题，先运行上面的权限修复命令）
npm install --legacy-peer-deps

# 3. 启动 Storybook
npm run storybook

# 4. 在浏览器中查看组件（自动打开 http://localhost:6006）
```

## 🎯 成功标志

安装成功后，你应该看到：
- `node_modules` 文件夹已创建
- 运行 `npm run storybook` 后，浏览器自动打开并显示组件库界面

祝学习愉快！🚀

